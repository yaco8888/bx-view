<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>课堂</title>
    <link rel="stylesheet" href="http://at.alicdn.com/t/font_2384888_ojge9md3tr.css">
    <link rel="shortcut icon" href="./favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="./css/index.css">
    <script src="js/index.js"></script>
    <script src="js/vue-v2.6.10.js"></script>
    <script src="js/axios-0.18.0.js"></script>
</head>

<body>
    <div id="app">
        <!-- 导航菜单 -->
        <nav>
            <div class="main">
                <img src="./img/index/logo.png" alt="" class="logo">
                <ul class="">
                    <li class="check"><a href="javascript:;">首页</a></li>
                    <li><a href="pages/online.html">全部课程</a></li>
                    <li><a href="javascript:;">在线练习</a></li>
                    <li><a href="javascript:;">精品课程</a></li>
                </ul>
                <div class="search">
                    <div class="left">课程<i class="iconfont icon-down"></i>
                    </div>
                    <input type="text" placeholder="搜索感兴趣的内容">
                    <img src="./img/index/search.png" alt="">
                </div>

                <!-- 登陆注册的div -->
                <!-- v-if 是否渲染该标签  true 显示  false 隐藏 -->
                <div class="login" v-if="b">
                    <a href="./pages/loginAndRegister/login.html">登陆</a>
                    /
                    <a href="./pages/loginAndRegister/register.html">注册</a>
                </div>
                <!-- 用户信息的div -->
                <div class="user" v-if="!b">
                    <img src="./img/login/user.png" alt="">
                    <div class="userlist">
                        <ul>
                            <li v-text="user.name">用户姓名</li>
                            <a href="../pages/course.html">
                                <li>课程中心</li>
                            </a>
                            <li>订单中心</li>
                            <li>资金管理</li>
                            <li>个人中心</li>
                            <li class="out" @click="userEsc()">退出登陆</li>
                        </ul>
                    </div>
                </div>
            </div>
        </nav>
        <!-- 主体内容 -->
        <main>
            <!-- banner -->
            <div class="banner">
                <ul class="img">
                    <!-- <li class="active"><img src="./img/index/tbanner1.png" alt=""></li>
                    <li><img src="./img/index/tbanner1.png" alt=""></li>
                    <li><img src="./img/index/tbanner3.png" alt=""></li>  -->
                </ul>
                <ul class="list">
                    <li class="high">24小时不断电大课堂</li>
                    <li>内容不够2</li>
                    <li>内容不够3</li>
                    <li>内容不够4</li>
                    <li>内容不够5</li>
                    <li>内容不够6</li>
                </ul>
            </div>

            <!-- 同步课程 -->
            <div class="online">
                <div class="title">
                    <span class="line"></span>
                    <span class="cont">JAVAEE</span>
                    <span class="more">更多课程<i class="iconfont icon-right1"></i>
                    </span>
                </div>
                <div class="onlineCont">
                    <div class="content">
                        <ul>
                            <li v-for="(item,index) in JAVAEEList">
                                <div class="top">
                                    <span class="rj" v-text="item.courseName">人教版</span>
                                    <img :src=`http://localhost:8080/eduPic/${item.courseImage}` alt="" class="m">
                                    <p>1100人在学习</p>
                                </div>
                                <div class="bottom">
                                    <div class="left">
                                        <span v-text="item.descs">行政管理专业班</span>
                                        <span class="time">23课时</span>
                                    </div>
                                    <div class="right" @click="toDetail(item.cid)">免费学习</div>
                                </div>
                            </li>
                            
                        </ul>
                    </div>
                </div>
            </div>

            <!-- 页面广告 -->
            <div class="contBanner">
                <img src="./img/index/WechatIMG20.png" alt="">
            </div>


        </main>
    </div>
</body>
<script>
    new Vue({
        el: "#app",
        data: {
            b: true,
            user: "",
            JAVAEEList:[],
            SQLList:[],
            H5List:[]
        },
        methods: {
            //获取user
            getUser() {
                //获取sessionStorage中的user
                let user = JSON.parse(sessionStorage.getItem("user"));
                if (user == null) {
                    //没有登陆
                    this.user = "";
                    this.b = true;
                } else {
                    //登陆成功
                    this.user = user;
                    this.b = false;
                }
                console.log(user);
            },
            //用户退出
            userEsc() {
                //将sessionStorage中的用户清除掉
                sessionStorage.removeItem("user");
                //刷新页面
                location.reload();
            },
            //查询课程通过课程类型type
            findCourseByType(type) {
                axios.get(`http://localhost:8080/edu/course_Servlet?method=findCourseByType&type=${type}`)
                .then(resp => {
                    if(resp.data.code == 200) {
                        if (type == 1) {
                            this.JAVAEEList = resp.data.data;
                        }else if(type == 2) {
                            this.SQLList = resp.data.data;
                        }else {
                            this.H5List = resp.data.data;
                        }

                    }else {
                        alert(resp.data.message);
                    }
                }).catch(_ => {
                    console.log("查询课程出现异常");
                })
            },
            //去课程详情页
            toDetail(cid) {
                location.href="pages/videoDetail.html?cid=" + cid;
            }
        },
        created() {
            this.getUser();
            //查询JAVAEE 
            this.findCourseByType(1);
            //查询数据库和前端
            this.findCourseByType(2);
            this.findCourseByType(3);
        }
    })


</script>

</html>